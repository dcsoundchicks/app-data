#!/usr/bin/env node

var queue = require('queue-async');
var flatten = require('lodash.flatten');
var fs = require('fs');

// require scrapers here
var venues = [
    require('../venues/dc9.js'),
];

var q = queue(1);

// load all venues
venues.forEach(function(venue) {
    q.defer(venue.load);
});

// write to file in json-output
q.awaitAll(function(err, res) {
    if (err) throw err;
    fs.writeFile('../json-output/dc9.json', JSON.stringify(flatten(res), null, 2));
    console.log('File successfully written! - Check your project directory for the output.json file');
});